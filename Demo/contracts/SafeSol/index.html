<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equv="X-UA-Compatible" contant="ie=edge">
    <title> Document</title>

    <link rel="stylesheet" type="text/css" href="main.css">
    <script src="./node_modules/web3/dist/web3.min.js"></script>
<style>
table, td {
    border: 1px solid black;
}
</style>
</head>
<body>
    <div>
        <img id="loader" src="https://loading.io/spinners/double-ring/lg.double-ring-spinner.gif">
        <p>Click the button to add a new row at the first position of the table and then add cells and content.</p>
        <button id="GetGladiator">Get Gladiator</button>
    </div>


<table id="characterTable">
    <tr>
        <td>Name</td>
        <td>Level</td>
        <td>Date Created</td>
        <td>Currently</td>
    </tr>
    <tr>
        <td>Test name</td>
        <td>1</td>
        <td>01-01-01</td>
        <td>None</td>
    </tr>

</table>
<br>

<button onclick="UpdateElements()">Try it</button>
<script src="https://code.jquery.com/jquyery-3.2.1.slim.min.js"></script>
<script>

    if (typeof web3 !== 'undefined') {
            web3 = new Web3(web3.currentProvider);
        }
        else {
            web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:7777"));
        }
        web3.eth.defaultAccount = web3.eth.accounts[0];
        var gameAbi = web3.eth.contract([
        ])
        //Insert contract address
        var GameContractAddress = gameAbi.at("0x0");
        console.log(GameContractAddress);
        var GameEvent = GameContractAddress.gameinfo({},'latest');
        GameEvent.watch(function(error,result)  {
            if(!error) {
                if (result.blockHash != $('#pixTrans').html())
                $("#loader").hide();
            $("#pixTrans").html('Block hash: ' + result.blockHash);
            $("#pixel").html(web3.toAscii(result.args.xCord) + ' ' + web3.toAscii(result.args.yCord) + ' ' + web3.toAscii(result.args.Color) + ' ' + web3.toAscii(result.args.Owner));
            }
            else {
                $("#loader").hide();
            }
         });
        //Action
        /*
        $("#UpdateButton").click(function() {
            GameContractAddress.setPixel(web3.eth.defaultAccount, $("#xCord").val(), $("#yCord").val(), $("#Color").val(), $("#Owner").val(), (err,res) => {
            $("#loader").show();
            if(err) {
                $("#loader").hide();
                console.log('Something went wrong!');
            }            
        });
        */
          $("#GetButton").click(function() {
            GameContractAddress.getGladiators(web3.eth.defaultAccount , (err,res) => {
            $("#loader").show();
            if(err) {
                $("#loader").hide();
                console.log('Something went wrong!');
            }            
        });



    function UpdateElements() {
        var table = document.getElementById("characterTable");
        var row = table.insertRow(-1);
        var cell1 = row.insertCell(0);
        var cell2 = row.insertCell(1);
        var cell3 = row.insertCell(2);
        var cell4 = row.insertCell(3);
        cell1.innerHTML = "NEW CELL1";
        cell2.innerHTML = "NEW CELL2";
        cell3.innerHTML = "NEW CELL3";
        cell4.innerHTML = "NEW CELL4";
    }

    function GetGladiator() {

    }



</script>

</body>
</html>
